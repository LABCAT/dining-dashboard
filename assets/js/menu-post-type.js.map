{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/menu-post-type/index.js","webpack:///./src/menu-post-type/style.scss?baa6"],"names":["$","jQuery","document","ready","diningDashboard","init","slideToggleTrigger","menuSectionClass","menuGridClass","menuItemClass","gridHolderClass","imageClass","loadImages","menuMasonry","scrollListener","resizeListener","length","buttonListener","each","i","el","element","isElementInView","imageUrl","data","css","grid","gridCols","console","log","find","cols","match","gridTop","parseInt","offset","top","columnClass","columnItems","columnMasonry","previousItem","previousItemBottom","index","distance","currentItem","eq","height","outerHeight","currentTop","window","scroll","on","toggleClass","closest","slideToggle","pageTop","scrollTop","pageBottom","elementTop","elementBottom","resizeGridItem","item","getElementsByClassName","rowHeight","getComputedStyle","getPropertyValue","rowGap","rowSpan","Math","ceil","querySelector","getBoundingClientRect","style","gridRowEnd","resizeAllGridItems","allItems","x"],"mappings":"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","file":"js/menu-post-type.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/menu-post-type/index.js\");\n","import './style.scss';\n\n; (\n    function ($) {\n\n        jQuery(document).ready(\n            function () {\n                diningDashboard.init();\n            }\n        );\n\n    }\n)(jQuery);\n\n\n\nvar diningDashboard = {\n\n    slideToggleTrigger: jQuery('.has-slide-toggle header'),\n\n    menuSectionClass: '.wp-block-dining-dashboard-menu-section',\n\n    menuGridClass: '.wp-block-dining-dashboard-menu-section-grid',\n\n    menuItemClass: '.wp-block-dining-dashboard-menu-item',\n    \n    gridHolderClass: '.grid-holder',\n\n    imageClass: '.img',\n\n    init: function () {\n        \n        diningDashboard.loadImages();\n        diningDashboard.menuMasonry();\n        diningDashboard.scrollListener();\n        diningDashboard.resizeListener();\n\n        if (diningDashboard.slideToggleTrigger.length) {\n            diningDashboard.buttonListener();\n        }\n    },\n\n    loadImages: function() {\n        jQuery(diningDashboard.imageClass).each(\n            function (i, el) {\n                let element = jQuery(el);\n                if (diningDashboard.isElementInView(element)){\n                    let imageUrl = element.data('image');\n                    element.css('background-image', 'url(' + imageUrl + ')');\n                }\n            }\n        );\n    },\n\n    menuMasonry: function() {\n        jQuery(diningDashboard.menuGridClass).each(\n            function (i, el) {\n                let grid = jQuery(el);\n                let gridCols = grid.data('columns');\n                if (gridCols > 1) {\n                    console.log('grid', grid.data('columns'));\n                    //reset margin-top\n                    grid.find(diningDashboard.menuItemClass).css('marginTop', 0);\n                    //find out actual columns as set in the css\n                    let cols = grid.css('grid-template-columns');\n                    cols = (cols.match(/px/g) || []).length;\n                    if(cols > 1){\n                        let gridTop = parseInt(grid.offset().top);\n                        for (let i = 1; i <= gridCols; i++) {\n                            let columnClass = '.column-' + i;\n                            let columnItems = grid.find(diningDashboard.menuItemClass + columnClass);\n                            console.log(columnClass);\n                            \n                            if (columnItems.length){\n                                diningDashboard.columnMasonry(gridTop, columnItems);\n                            }\n                        }\n                    }\n                }\n            }\n        );\n    },\n\n    columnMasonry: function (gridTop, columnItems){\n        let previousItem = {};\n        let previousItemBottom = 0\n        console.log('grid top', gridTop);\n        for (let index = 0; index < columnItems.length; index++) {\n            let distance = 0;\n            let currentItem = columnItems.eq(index);\n            currentItem.height(currentItem.outerHeight())\n            let currentTop = parseInt(currentItem.offset().top);\n            currentItem.data('top', currentTop);\n            currentItem.data('bottom', currentItem.outerHeight());\n            console.log('index', index);\n            console.log('current item top', currentTop);    \n            console.log('current item outerHeight', currentItem.outerHeight(true));\n            \n            if (index < 1){\n                distance = currentTop - gridTop;\n            }\n            else {\n                distance = currentTop - previousItemBottom - 20;\n            }\n\n            if (distance < 0){\n                distance = 0;\n            }\n            // currentItem.animate(\n            //     { marginTop: -distance },\n            //     500\n            // );\n            currentItem.css('marginTop', -distance);\n\n            previousItem = currentItem;\n            previousItemBottom = currentTop - distance + currentItem.outerHeight();\n            console.log('prviou test');\n            console.log('distance', distance);\n            console.log('previous bottom', previousItemBottom);\n            \n        }\n    },\n\n    scrollListener: function(){\n        jQuery(window).scroll(\n            function () {\n                diningDashboard.loadImages();\n            }\n        );\n    },\n\n    resizeListener: function(){\n        jQuery(window).on(\n            'resize', \n            function () {\n                diningDashboard.loadImages();\n                diningDashboard.menuMasonry();\n            }\n        );\n    },\n\n    buttonListener: function () {\n        diningDashboard.slideToggleTrigger.on(\n            'click',\n            function () {\n                jQuery(this).toggleClass('open');\n                jQuery(this).closest(diningDashboard.menuSectionClass).find(diningDashboard.gridHolderClass).slideToggle();\n            }\n        );\n    },\n\n\n    isElementInView: function (element) {\n        let pageTop = jQuery(window).scrollTop();\n        let pageBottom = pageTop + jQuery(window).height();\n        let elementTop = element.offset().top;\n        let elementBottom = elementTop + element.height();\n        return ((elementTop <= pageBottom) && (elementBottom >= pageTop));\n    }\n}\n\nfunction resizeGridItem(item) {\n    grid = document.getElementsByClassName(\"grid\")[0];\n    rowHeight = parseInt(window.getComputedStyle(grid).getPropertyValue('grid-auto-rows'));\n    rowGap = parseInt(window.getComputedStyle(grid).getPropertyValue('grid-row-gap'));\n    rowSpan = Math.ceil((item.querySelector('.content').getBoundingClientRect().height + rowGap) / (rowHeight + rowGap));\n    item.style.gridRowEnd = \"span \" + rowSpan;\n}\n\nfunction resizeAllGridItems() {\n    allItems = document.getElementsByClassName(\"item\");\n    for (x = 0; x < allItems.length; x++) {\n        resizeGridItem(allItems[x]);\n    }\n}","// extracted by mini-css-extract-plugin"],"sourceRoot":""}